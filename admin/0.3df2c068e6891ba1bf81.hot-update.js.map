{"version":3,"file":"0.3df2c068e6891ba1bf81.hot-update.js","sources":["webpack:///./src/components/TeamMembers/TeamMembers.js"],"sourcesContent":["import React, { PureComponent } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport { rateLimit } from \"../../utils/number\";\nimport { NoVacancyCard } from \"./NoVacancyCard\";\nimport { GoNextLink } from \"../../components/GoNextLink/GoNextLink\";\nimport { TeamMemberCard } from \"../../components/TeamMemberCard/TeamMemberCard\";\nimport { TeamMembersContainer, PhotoContainer } from \"./styles\";\nimport { HowWeAreWorking } from \"../HowWeAreWorking/HowWeAreWorking\";\n\nfunction getColumns({ items }) {\n  const newArray = items.slice();\n\n  const firstCol = [];\n  const lastCol = [];\n  newArray.forEach((item, i) => (i % 2 ? lastCol.push(item) : firstCol.push(item)));\n  return firstCol.concat(lastCol);\n}\n\nexport class TeamMembers extends PureComponent {\n  static propTypes = {\n    items: PropTypes.oneOfType([\n      PropTypes.arrayOf(PropTypes.object),\n      PropTypes.arrayOf(PropTypes.string),\n    ]),\n    verticalCentering: PropTypes.bool,\n  };\n\n  state = {\n    cardHeight: 320,\n    photoHeight: 225,\n  };\n\n  container = null;\n\n  componentDidMount() {\n    window.addEventListener(\"resize\", this.onResize);\n    this.onResize();\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"resize\", this.onResize);\n  }\n\n  static defaultProps = {\n    items: [],\n  };\n\n  onResize = () => {\n    const { verticalCentering } = this.props;\n    const viewportWidth = Math.max(document.documentElement.clientWidth, window.innerWidth || 0);\n    let containerHeight = 0;\n\n    if (verticalCentering && this.container) {\n      containerHeight = this.container.offsetHeight;\n    }\n\n    console.info(\"--> containerHeight ggwp 4444\", containerHeight);\n\n    if (viewportWidth <= 992) {\n      this.setState({ photoHeight: 164 });\n    } else {\n      this.setState({ photoHeight: 225 });\n    }\n  };\n\n  onContainerRef = ref => {\n    if (ref) {\n      this.container = ref;\n    }\n  };\n\n  render() {\n    const { cardHeight, photoHeight } = this.state;\n    const margin = 30;\n    const { items, id } = this.props;\n    const isVacancy = id === \"vacancy\";\n    const isPhoto = id === \"photo\";\n    const data = getColumns({ items });\n    const height = isPhoto ? photoHeight : cardHeight;\n    const top = height / 2;\n    const half = Math.round(data.length / 2);\n    const containerHeight =\n      data.length > 2\n        ? Math.ceil(data.length / 2) * (height + margin) +\n          (data.length % 2 === 0 ? height / 2 : 0) +\n          4\n        : rateLimit(Math.ceil(data.length / 2), 1) * height + 4;\n    console.info(\"--> containerHeight ggwp 4444\", containerHeight);\n\n    const noVacancies = isVacancy && items && items.length === 0;\n\n    if (id === \"process\") {\n      return (\n        <TeamMembersContainer ref={this.onContainerRef}>\n          <HowWeAreWorking items={items} />\n        </TeamMembersContainer>\n      );\n    }\n\n    return (\n      <TeamMembersContainer oneItem={data.length <= 1} style={{ height: containerHeight + \"px\" }}>\n        {noVacancies ? (\n          <NoVacancyCard />\n        ) : (\n          data.map((item, index) => {\n            if (isPhoto) {\n              const key = `photo-${index + 1}`;\n              return (\n                <PhotoContainer\n                  style={{ marginTop: index === half && top, height, marginBottom: margin }}\n                  key={key}\n                >\n                  <img src={item} alt={key} />\n                </PhotoContainer>\n              );\n            }\n\n            return (\n              <TeamMemberCard\n                control={\n                  isVacancy ? (\n                    <GoNextLink gatsby to={item.longreadLink}>\n                      Описание вакансии\n                    </GoNextLink>\n                  ) : null\n                }\n                avatar={item.avatar}\n                vacancy={isVacancy}\n                withMarginTop={index === half}\n                height={height}\n                top={top}\n                margin={margin}\n                key={`${item.name}-${index + 1}`}\n                {...item}\n              />\n            );\n          })\n        )}\n      </TeamMembersContainer>\n    );\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAUA;AACA;AAFA;AATA;AACA;AADA;AA6BA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AA9CA;AAgDA;AACA;AACA;AACA;AACA;AApDA;AAAA;AACA;AADA;AACA;AADA;AAiBA;AACA;AACA;AACA;AApBA;AAsBA;AACA;AACA;AAxBA;AAqDA;AAAA;AAAA;AAEA;AAFA;AAAA;AAAA;AAIA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAMA;AAEA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAGA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAKA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AACA;AAFA;AAIA;AAAA;AAAA;AAGA;AACA;AACA;AAEA;AAEA;AAAA;AAAA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AAdA;AAkBA;AAIA;AACA;AA3HA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAEA;AAIA;AALA;AADA;AA0BA;AADA;;;;;;;;;;AAlCA;AASA;;;;;;;;;;;;;A","sourceRoot":""}